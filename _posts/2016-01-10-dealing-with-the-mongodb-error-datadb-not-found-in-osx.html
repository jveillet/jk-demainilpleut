---
excerpt_separator: <!--readmore-->
layout: post
title: 'Dealing with the MongoDB error /data/db not found in OSX'
published_at: 2016-01-10T10:50:00+00:00
categories: [Code, Javascript, NoSQL]
permalink: /:title/
author: jveillet
---

<h2>Disclaimer</h2>
<p>if you landed somehow on this article, you have probably miss something in the install process of <a href="https://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/" target="_blank">MongoDB</a>.</p>

<h2>What the.. ?</h2>
<p>When trying to launch mongodb in your Terminal, I guess you have met with this kind of error message:</p>
<pre><code class="language-bash">
$ mac:app jeremie$ mongod
2015-10-09T12:06:37.396+0200 I STORAGE [initandlisten] exception in initAndListen:
29 Data directory /data/db not found., terminating
</code></pre>

<p>Basically, the output is pretty clear, you do not have the <em><strong>data</strong></em> directory, and its <em><strong>db</strong></em> subdirectory created in your root folder, which are essential to run the mongodb instance.
So let's go ahead and fix that, and create that directory.</p>

<pre><code class="language-bash">
$ mkdir -p /data/db
</code></pre>

<p>If you try to launch the <code>mongod</code> command again after that, it will fail with something like the above:</p>
<pre><code class="language-bash">
$ mac:app jeremie$ mongod
2015-10-09T12:10:17.370+0200 I STORAGE [initandlisten] exception in initAndListen: 98 Unable to create/open lock file:
/data/db/mongod.lock errno:13 Permission denied Is a mongod instance already running?, terminating
</code></pre>

<p>The directory is created, but you do not have sufficient rights to interact with it.</p>

<h2>Do I have the permission, Sir?</h2>
<p>Fixing this error message is pretty straightforward, the two commands below will do the trick:</p>
<pre><code class="language-bash">
$ sudo chmod 0755 /data/db
$ sudo chown $USER /data/db
</code></pre>
<!--readmore-->

<p>Simply put, what it means on the first line is the owner have read, write, and execute rights, and others have only read and execute rights.<br>
The second line changes the ownership of the directory from its current owner to the logged in user.</p>

<p>Aaaaand, that's it! Next time you will fire the <code>mongod</code> command, you should see an output like this:</p>
<pre><code class="language-bash">
$ mac:~ jeremie$ mongod
[...]
2015-10-09T12:24:43.826+0200 I STORAGE [FileAllocator] creating directory /data/db/_tmp
2015-10-09T12:24:44.612+0200 I STORAGE [FileAllocator] done allocating datafile /data/db/local.0, size: 64MB, took 0.785 secs
2015-10-09T12:24:44.960+0200 I NETWORK [initandlisten] waiting for connections on port 27017
2015-10-09T12:26:50.108+0200 I NETWORK [initandlisten] connection accepted from 127.0.0.1:50278 #1 (1 connection now open)
</code></pre>

<h2>Wrapping up</h2>
<p>Reading documentation is an essential part of being a software developer, it might not sound sexy, it's sometimes tedious, but it's an essential job to understand what you do and how things work.</p>
